# ReviewDoctor 리뷰 자동 수집 시스템

## 개요

ReviewDoctor에서 발생하는 리뷰를 **자동으로 Google Spreadsheet에 저장**하는 시스템입니다.
수동으로 리뷰를 복사/붙여넣기 할 필요 없이, 리뷰가 들어오면 자동으로 정리되어 저장됩니다.

---

## 주요 기능

### 1. 자동 리뷰 수집
- ReviewDoctor에서 새 리뷰가 등록되면 **실시간으로 자동 수집**
- 별도 작업 없이 Google Drive에 저장

### 2. 월별 스프레드시트 자동 생성
- 매월 새로운 스프레드시트가 자동으로 생성됩니다
- 파일명 형식: `ReviewDoctor_Raw_2025_01`, `ReviewDoctor_Raw_2025_02` ...
- 지정된 Google Drive 폴더에 정리되어 저장

### 3. 자동 파싱 (정보 추출)
리뷰 원문에서 다음 정보를 자동으로 추출합니다:

| 항목 | 설명 | 예시 |
|------|------|------|
| 지점명 | 리뷰에 언급된 매장/지점 | 강남점, 서초지점 |
| 별점 | 평점 정보 | 5점, 4.5/5, ★★★★ |
| 작성일 | 리뷰 작성 날짜 | 2025-01-15 |
| 리뷰 내용 | 실제 리뷰 텍스트 | "서비스가 정말 좋았습니다" |

### 4. 중복 방지
- 같은 리뷰가 여러 번 들어와도 **1번만 저장**
- 데이터 중복 걱정 없이 운영 가능

---

## 저장되는 데이터 (스프레드시트 컬럼)

| 컬럼명 | 설명 |
|--------|------|
| received_at | 시스템 수신 시각 |
| review_created_at | 리뷰 작성일 (추출된 경우) |
| store_name | 지점명 |
| rating | 별점 |
| review_id | 고유 식별자 (중복 방지용) |
| title | 원본 제목 |
| description | 원본 설명 |
| body | 원본 본문 |
| review_text | 추출된 리뷰 텍스트 |
| status | 처리 상태 (NEW → DONE) |
| processed_at | AI 처리 완료 시각 |
| error_message | 에러 메시지 (있는 경우) |

---

## 시스템 구성도

```
┌─────────────────┐     웹훅      ┌──────────────────┐     저장     ┌─────────────────┐
│  ReviewDoctor   │ ─────────────▶│   웹훅 서버      │ ───────────▶│ Google Sheets   │
│  (리뷰 플랫폼)  │   실시간 전송  │   (Render 배포)  │   자동 정리  │  (월별 파일)    │
└─────────────────┘               └──────────────────┘              └─────────────────┘
                                         │
                                         │ 파싱
                                         ▼
                                  ┌──────────────────┐
                                  │ • 지점명 추출    │
                                  │ • 별점 추출      │
                                  │ • 날짜 추출      │
                                  │ • 중복 체크      │
                                  └──────────────────┘
```

---

## 운영 방식

### 리뷰 수집 흐름
1. 고객이 ReviewDoctor에 리뷰 작성
2. ReviewDoctor가 웹훅으로 리뷰 데이터 전송
3. 서버가 데이터 수신 및 파싱
4. 중복 확인 후 Google Sheets에 저장
5. 이후 n8n에서 AI 처리 (요약, 분류 등) - *별도 구성*

### 데이터 확인
- Google Drive 지정 폴더에서 월별 스프레드시트 확인
- `Reviews` 탭에 모든 리뷰가 시간순으로 저장

---

## 향후 확장 (n8n 연동)

현재 시스템은 **리뷰 수집 및 저장**만 담당합니다.
이후 n8n과 연동하여 다음 기능을 추가할 수 있습니다:

- AI 리뷰 요약
- 긍정/부정 자동 분류
- 주간 리포트 자동 생성
- Slack/이메일 알림

---

## 웹훅 URL

ReviewDoctor에 등록할 웹훅 URL:

```
https://[배포된-앱-이름].onrender.com/webhook/reviewdoctor
```

> 정확한 URL은 Render 배포 후 확정됩니다.

---

## 문의

시스템 관련 문의사항이 있으시면 담당자에게 연락 부탁드립니다.
